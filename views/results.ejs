<% include partials/header %>

	<title>Results Page</title>
</head>
<body>
	<h1>Results Page</h1>
	<table border = "1">
	  <tr>
	    <th>Year</th>
	    <th>Name</th>
	    <th>Cover</th>
	    <th>IMDB Link</th>
	  </tr>
	  <% data['Search'].forEach(function(movie){ %>
	  <tr>
	    <% var imdb_url = 'https://www.imdb.com/title/' + movie['imdbID'] %>
	    <td><%= movie['Year'] %></td>
	    <td><%= movie['Title'] %></td>
	    <td><img src="<%= movie['Poster'] %>" alt=""></td>
	    <td><a href="<%= imdb_url %>">View on IMDB</a></td>
		<td><button onclick="addPlaylist(2,movie['Title'])" id="add-playlist-btn" >Add to public playlist</button></td>
        <td><button onclick="addPlaylist(2,movie['Title'])" id="add-playlist-btn" >Add to private playlist</button></td>
	  </tr>
	  <% }) %>
	</table>
	<br/>
 	<a href="/">Search Again!</a>
</body>
<script>
let myPublicPlaylist=[];
let myprivatePlaylist=[];

//Function to add to public playlist

let addPlaylist=(l,n)=>{
  if(l==1){
    myPublicPlaylist.push(n);
    result.innerHTML = `
    <h3>Public playlist</h3><hr>
    <ul id="myPublicPlaylist"></ul>`
    let list = document.getElementById("myPublicPlaylist");
    for (i = 0; i < myPublicPlaylist.length; ++i) {
        let li = document.createElement('li');
        li.innerText = myPublicPlaylist[i];
        list.appendChild(li);
    }
  }
  else if(l==2){
    myprivatePlaylist.push(n);
    result.innerHTML = `
    <h3>Private playlist</h3><hr>
    <ul id="myprivatePlaylist"></ul>`
    let list = document.getElementById("myprivatePlaylist");
    for (i = 0; i < myprivatePlaylist.length; ++i) {
        let li = document.createElement('li');
        li.innerText = myprivatePlaylist[i];
        list.appendChild(li);
    }
  }
}
add-playlist-btn.addEventListener("click", addPlaylist);
</script>
</html>
